<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content = "user-scalable=no, width=device-width, initial-scale=1.0; maximum-scale=1.0;" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Flora</title>
  <link rel="stylesheet" href="css/flora.css" type="text/css" charset="utf-8">
  <script src="lib/jquery.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="lib/modernizr.js" type="text/javascript" charset="utf-8"></script>
  <script src="../build/build.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <script type="text/javascript" charset="utf-8">

      var system = new exports.FloraSystem();

      system.start(function () {

         Flora.world.update({
          showStats: true,
          c: 1,
          gravity: PVector.create(0, 0)
        });

        var pl = new Flora.ColorPalette();

        pl.addColor({
          min: 12,
          max: 48,
          startColor: [220, 220, 220],
          endColor: [60, 60, 60]
        });

        var winHeight = exports.Utils.getWindowSize().height;
        var ballSize = 20;
        var totalBalls = 26;

        for (var i = 0; i < totalBalls; i++) {
          var ball = new Flora.Walker({
            className: 'cyclone',
            width: 0,
            height: 0,
            location: Flora.PVector.create(Flora.world.width/2, Flora.world.height - (Math.pow(i, 2.05))),
            isHarmonic: true,
            maxSpeed: false,
            isPerlin: false,
            perlinTime: 0,
            perlinSpeed: 0.001,
            harmonicAmpX: 10,
            harmonicPeriodX: Math.sqrt(i) * 6,
            borderRadius: '100%',
            color: pl.getColor(),
            boxShadow: '0 0 ' + (ballSize * (i + 0) * 0.25) + 'px ' + (ballSize * (i + 0) * 0.25) + 'px rgba(' + pl.getColor().toString() + ', .5)',
            beforeStep: function() {
              //this.opacity = Flora.Utils.map(this.velocity.mag(), 0, this.maxSpeed, 1, 0.2);
              this.perlinTime += this.perlinSpeed;
              var noise = Flora.SimplexNoise.noise(this.perlinTime, 0);
              this.harmonicPeriod = Flora.PVector.create(this.harmonicPeriodX, 1);
              this.harmonicAmplitude = Flora.PVector.create(this.harmonicAmpX + noise, 0);
            }
          });
        }

        /*var winHeight = exports.Utils.getWindowSize().height;
        var ballSize = 20;
        var totalBalls = Math.floor((winHeight + 100)/ballSize);

        for (var i = 0; i < totalBalls; i++) {
          var ball = new Flora.Walker({
            className: 'cyclone',
            width: 0,
            height: 0,
            location: Flora.PVector.create(Flora.world.width/2, Flora.world.height - (i * ballSize)),
            isHarmonic: true,
            maxSpeed: false,
            isPerlin: false,
            perlinTime: 0,
            perlinSpeed: 0.001,
            harmonicAmpX: 10,
            harmonicPeriodX: Math.sqrt(i) * 6,
            borderRadius: '100%',
            color: pl.getColor(),
            boxShadow: '0 0 ' + (ballSize * (i + 1) * 0.1) + 'px ' + (ballSize * (i + 1) * 0.15) + 'px rgba(' + pl.getColor().toString() + ', .5)',
            beforeStep: function() {
              //this.opacity = Flora.Utils.map(this.velocity.mag(), 0, this.maxSpeed, 1, 0.2);
              this.perlinTime += this.perlinSpeed;
              var noise = Flora.SimplexNoise.noise(this.perlinTime, 0);
              this.harmonicPeriod = Flora.PVector.create(this.harmonicPeriodX, 1);
              this.harmonicAmplitude = Flora.PVector.create(this.harmonicAmpX + noise, 0);
            }
          });
        }*/

        /*var winHeight = exports.Utils.getWindowSize().height;
        var ballSize = 30;
        var totalBalls = Math.floor(winHeight/30);

        for (var i = 0; i < totalBalls; i++) {
          var ball = new Flora.Walker({
            className: 'cyclone',
            width: 20,
            height: 20,
            location: Flora.PVector.create(Flora.world.width/2, Flora.world.height - (i * ballSize)),
            isHarmonic: true,
            perlinTime: 0,
            perlinSpeed: 0.005,
            harmonicAmpX: exports.Utils.getRandomNumber(45, 48, true) - (exports.Utils.getRandomNumber(45, 48, true) - i),
            harmonicAmplitude: exports.PVector.create(48, 0), // higher value = faster/farther
            harmonicPeriod: exports.PVector.create(48, 1), // lower value = faster
            borderRadius: '100%',
            color: [255, 255, 255],
            //boxShadow: '1px 1px ' + (ballSize * i * 0.25) + 'px ' + (ballSize * i * 0.25) + 'px rgba(' + pl.getColor().toString() + ', .5)',
            beforeStep: function() {
              this.opacity = Flora.Utils.map(this.velocity.mag(), 0, this.maxSpeed, 1, 0.2);
              this.perlinTime += this.perlinSpeed;
              var noise = Flora.SimplexNoise.noise(this.perlinTime, 0) * 20;
              this.harmonicAmplitude = Flora.PVector.create(this.harmonicAmpX + noise, 0);
            }
          });
        }*/

        /*var p = 1;
        var h = 30;

        for (var i = 0; i < 10; i++) {
          p += 1;
          console.log(Math.sqrt(p));


          new Flora.Walker({
            className: 'cyclone',
            width: 0,
            height: 0,
            location: Flora.PVector.create(Flora.world.width/2, Flora.world.height - (h + (i * 70))),
            isHarmonic: true,
            perlinTime: 0,
            perlinSpeed: 0.005 + (i * 0.01),
            harmonicAmpX: (i * 2),
            harmonicAmplitude: exports.PVector.create(p, 0), // higher value = faster/farther
            harmonicPeriod: exports.PVector.create(p, 1), // lower value = faster
            borderRadius: '100%',
            boxShadow: '1px 1px ' + ((h) + (i * 10)) + 'px ' + ((h) + (i * 20)) + 'px rgba(' + pl.getColor().toString() + ', .5)',
            beforeStep: function() {
              this.opacity = Flora.Utils.map(this.velocity.mag(), 0, this.maxSpeed, 1, 0.2);
              this.perlinTime += this.perlinSpeed;
              var noise = Flora.SimplexNoise.noise(this.perlinTime, 0) * 2;
              this.harmonicAmplitude = Flora.PVector.create(this.harmonicAmpX + noise, 0);
            }
          });
        }*/

        /*var p = 1;
        var h = 15;

        for (var i = 0; i < 20; i++) {
          p += 1;
          console.log(Math.sqrt(p));


          new Flora.Walker({
            className: 'cyclone',
            width: 0,
            height: 0,
            location: Flora.PVector.create(Flora.world.width/2, Flora.world.height/2 + (h * i)),
            isHarmonic: true,
            perlinTime: 0,
            perlinSpeed: 0.005 + (i * 0.01),
            harmonicAmpX: 24 - (i * 1.75),
            harmonicAmplitude: exports.PVector.create(24 + p, 0), // higher value = faster/farther
            harmonicPeriod: exports.PVector.create(35 - p, 1), // lower value = faster
            borderRadius: '100%',
            boxShadow: '1px 1px ' + ((h * 2) - (i * 1)) + 'px ' + ((h * 2) - (i * 1)) + 'px rgba(' + pl.getColor().toString() + ', .5)',
            beforeStep: function() {
              this.opacity = Flora.Utils.map(this.velocity.mag(), 0, this.maxSpeed, 1, 0.2);
              this.perlinTime += this.perlinSpeed;
              var noise = Flora.SimplexNoise.noise(this.perlinTime, 0) * 2;
              this.harmonicAmplitude = Flora.PVector.create(this.harmonicAmpX + noise, 0);
            }
          });

        }*/

/*
        new Flora.Walker({
          className: 'cyclone',
          width: 0,
          height: 0,
          isHarmonic: true,
          perlinTime: 0,
          perlinSpeed: 0.005,
          harmonicAmpX: 24,
          harmonicAmplitude: exports.PVector.create(24, 0), // higher value = faster/farther
          harmonicPeriod: exports.PVector.create(35, 1), // lower value = faster
          borderRadius: '100%',
          boxShadow: '1px 1px 30px 30px rgba(' + pl.getColor().toString() + ', .5)',
          beforeStep: function() {
            this.opacity = Flora.Utils.map(this.velocity.mag(), 0, this.maxSpeed, 1, 0.2);
            this.perlinTime += this.perlinSpeed;
            var noise = Flora.SimplexNoise.noise(this.perlinTime, 0) * 2;
            this.harmonicAmplitude = Flora.PVector.create(this.harmonicAmpX + noise, 0);
          }
        });
        new Flora.Walker({
          className: 'cyclone',
          width: 0,
          height: 0,
          location: Flora.PVector.create(Flora.world.width/2, Flora.world.height/2 + 30),
          isHarmonic: true,
          perlinTime: 10000,
          perlinSpeed: 0.006,
          harmonicAmpX: 23,
          harmonicAmplitude: exports.PVector.create(23, 0), // higher value = faster/farther
          harmonicPeriod: exports.PVector.create(36, 1), // lower value = faster
          borderRadius: '100%',
          boxShadow: '1px 1px 30px 30px rgba(' + pl.getColor().toString() + ', .5)',
          beforeStep: function() {
            this.opacity = Flora.Utils.map(this.velocity.mag(), 0, this.maxSpeed, 1, 0.2);
            this.perlinTime += this.perlinSpeed;
            var noise = Flora.SimplexNoise.noise(this.perlinTime, 0) * 2;
            this.harmonicAmplitude = Flora.PVector.create(this.harmonicAmpX + noise, 0);
          }
        });
        new Flora.Walker({
          className: 'cyclone',
          width: 0,
          height: 0,
          location: Flora.PVector.create(Flora.world.width/2, Flora.world.height/2 + 60),
          isHarmonic: true,
          perlinTime: 20000,
          perlinSpeed: 0.007,
          harmonicAmpX: 22,
          harmonicAmplitude: exports.PVector.create(22, 0), // higher value = faster/farther
          harmonicPeriod: exports.PVector.create(37, 1), // lower value = faster
          borderRadius: '100%',
          boxShadow: '1px 1px 30px 30px rgba(' + pl.getColor().toString() + ', .5)',
          beforeStep: function() {
            this.opacity = Flora.Utils.map(this.velocity.mag(), 0, this.maxSpeed, 1, 0.2);
            this.perlinTime += this.perlinSpeed;
            var noise = Flora.SimplexNoise.noise(this.perlinTime, 0) * 2;
            this.harmonicAmplitude = Flora.PVector.create(this.harmonicAmpX + noise, 0);
          }
        });*/
      });
  </script>
</body>
</html>