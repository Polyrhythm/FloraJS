<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content = "user-scalable=no, width=device-width, initial-scale=1.0; maximum-scale=1.0;" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Flora</title>
  <link rel="stylesheet" href="css/flora.css" type="text/css" charset="utf-8">
  <script src="lib/jquery.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="lib/modernizr.js" type="text/javascript" charset="utf-8"></script>
  <script src="../build/build.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <!-- <div class='caption'>click for more oscillators</div> -->
    <script type="text/javascript" charset="utf-8">

      var system = new exports.FloraSystem();

      system.start(function () {

        Flora.world.update({
          color: [255, 255, 255]
        });

        var pt = new Flora.Point();

        var osc = [],
            h = exports.defaultColors.getColor('heat'), // gets the heat start and end colors
            f = exports.defaultColors.getColor('food'), // gets the food start and end colors
            pl = new Flora.ColorPalette();

        pl.addColor({ // adds a random sampling of colors to palette
          min: 12,
          max: 24,
          startColor: h.startColor,
          endColor: h.endColor
        });

        var createOscillator = function() {

          var width = Flora.Utils.getRandomNumber(20, 100);

          osc.push(new Flora.Oscillator({
            amplitude: new Flora.Vector(Flora.world.width/2 - 50, Flora.world.height/2 - 50),
            acceleration: new Flora.Vector(0.015, 0.025),
            pointToDirection: true,
            width: width,
            height: width - 15,
            borderColor: pl.getColor(),
            color: pl.getColor(),
            boxShadow: '0 0 0 0.5em rgb(' + pl.getColor().toString() + ')'
          }));

          var connector = new exports.Connector({
            parentA: pt,
            parentB: osc[osc.length - 1],
            color: [0, 0, 0]
          });
        };
        createOscillator();

        var caption = new Flora.Caption({
          text: 'click to make more oscillators',
          opacity: 0.4,
          borderColor: 'transparent',
          position: 'bottom center'
        });

        Flora.Utils.addEvent(document, 'mouseup', function() {
          'use strict';
          createOscillator();
        });
      });
  </script>
</body>
</html>