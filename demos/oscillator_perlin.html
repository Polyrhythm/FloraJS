<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content = "user-scalable=no, width=device-width, initial-scale=1.0; maximum-scale=1.0;" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Flora</title>
  <link rel="stylesheet" href="css/flora.css" type="text/css" charset="utf-8">
  <style>
    .caption {
      width: 25%;
      position: relative;
      top: 90%;
      margin: 0 auto;
      font-family: "Franklin Gothic Medium", "Franklin Gothic", "ITC Franklin Gothic", Arial, sans-serif;
      color: #000; opacity: 0.5;
      text-align: center;
      -webkit-user-select: none;
      -moz-user-select: none;
      -o-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
  <script src="lib/jquery.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="lib/modernizr.js" type="text/javascript" charset="utf-8"></script>
  <script src="../build/build.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <div class='caption'>click for more oscillators</div>
    <script type="text/javascript" charset="utf-8">

      var system = new exports.FloraSystem();

      system.start(function () {

        Flora.world.update({
          color: [255, 255, 255]
        });

        var pt = new Flora.Point();

        var i, max,
            h = exports.defaultColors.getColor('heat'),
            c = exports.defaultColors.getColor('cold'),
            f = exports.defaultColors.getColor('food'),
            o = exports.defaultColors.getColor('oxygen'),
            l = exports.defaultColors.getColor('light'),
            pl = new Flora.ColorPalette(),
            borderColor, color;

        pl.addColor({ // adds a random sampling of colors to palette
          min: 12,
          max: 24,
          startColor: h.startColor,
          endColor: h.endColor
        }).addColor({ // adds a random sampling of colors to palette
          min: 12,
          max: 24,
          startColor: c.startColor,
          endColor: c.endColor
        }).addColor({ // adds a random sampling of colors to palette
          min: 12,
          max: 24,
          startColor: f.startColor,
          endColor: f.endColor
        }).addColor({ // adds a random sampling of colors to palette
          min: 12,
          max: 24,
          startColor: o.startColor,
          endColor: o.endColor
        }).addColor({ // adds a random sampling of colors to palette
          min: 12,
          max: 24,
          startColor: l.startColor,
          endColor: l.endColor
        });

        var createOscillator = function() {
          max = 6;
          offset = Flora.Utils.getRandomNumber(1, 100);
          borderColor = pl.getColor();
          color = pl.getColor();
          boxShadow = pl.getColor();
          width = Flora.Utils.getRandomNumber(20, 100);

          for (var i = 0; i < max; i++) {

            var osc = new Flora.Oscillator({
              amplitude: new Flora.Vector(Flora.world.width/2 - 50, Flora.world.height/2 - 50),
              pointToDirection: true,
              width: Flora.Utils.map(i, 0, max, 1, width),
              height: Flora.Utils.map(i, 0, max, 1, width - 15),
              opacity: Flora.Utils.map(i, 0, max, .1, 1),
              isPerlin: true,
              perlinOffsetX: Flora.Utils.map(i, 0, max, -offset - 0.1, -offset),
              perlinOffsetY: Flora.Utils.map(i, 0, max, offset, offset + 0.1),
              borderColor: borderColor,
              color: color,
              boxShadow: '0 0 0 0.5em rgb(' + boxShadow.toString() + ')'
            });
          }
        };

        for (i = 0; i < 3; i++) {
          setTimeout(createOscillator, i * 500);
        }

        Flora.Utils.addEvent(document, 'mouseup', function() {
          'use strict';
          createOscillator();
        });

        /*max = 6;
        borderColor = pl.getColor();
        color = pl.getColor();

        for (var i = 0; i < max; i++) {

          var osc = new Flora.Oscillator({
            amplitude: new Flora.Vector(Flora.world.width/2 - 50, Flora.world.height/2 - 50),
            pointToDirection: true,
            width: Flora.Utils.map(i, 0, max, 1, 20),
            height: Flora.Utils.map(i, 0, max, 1, 5),
            opacity: Flora.Utils.map(i, 0, max, .1, 1),
            isPerlin: true,
            perlinOffsetX: Flora.Utils.map(i, 0, max, -1.1, -1),
            perlinOffsetY: Flora.Utils.map(i, 0, max, 1, 1.1),
            borderColor: borderColor,
            color: color
          });
        }

        max = 6;
        borderColor = pl.getColor();
        color = pl.getColor();

        for (var i = 0; i < max; i++) {

          var osc = new Flora.Oscillator({
            amplitude: new Flora.Vector(Flora.world.width/2 - 50, Flora.world.height/2 - 50),
            pointToDirection: true,
            width: Flora.Utils.map(i, 0, max, 1, 20),
            height: Flora.Utils.map(i, 0, max, 1, 5),
            opacity: Flora.Utils.map(i, 0, max, .1, 1),
            isPerlin: true,
            perlinOffsetX: Flora.Utils.map(i, 0, max, -5.1, -5),
            perlinOffsetY: Flora.Utils.map(i, 0, max, 5, 5.1),
            borderColor: borderColor,
            color: color
          });
        }

        max = 6;
        borderColor = pl.getColor();
        color = pl.getColor();

        for (var i = 0; i < max; i++) {

          var osc = new Flora.Oscillator({
            amplitude: new Flora.Vector(Flora.world.width/2 - 50, Flora.world.height/2 - 50),
            pointToDirection: true,
            width: Flora.Utils.map(i, 0, max, 1, 20),
            height: Flora.Utils.map(i, 0, max, 1, 5),
            opacity: Flora.Utils.map(i, 0, max, .1, 1),
            isPerlin: true,
            perlinOffsetX: Flora.Utils.map(i, 0, max, -10.1, -10),
            perlinOffsetY: Flora.Utils.map(i, 0, max, 10, 10.1),
            borderColor: borderColor,
            color: color
          });
        }*/
      });
  </script>
</body>
</html>