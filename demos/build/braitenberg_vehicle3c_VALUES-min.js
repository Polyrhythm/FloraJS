var system=new Flora.FloraSystem;
system.start(function(){Flora.world.update({c:0.01,showStats:!1,gravity:Flora.PVector.create(0,0),width:3E3,height:3E3});var b=new Flora.Sensor({type:"heat",behavior:"COWARD",sensitivity:3,length:40,opacity:1,offsetAngle:7.5,border:"1px solid rgb(255, 69, 0)",afterStep:function(){this.activated?this.connector?(this.connector.parentA=this,this.connector.parentB=this.target):this.connector=new Flora.Connector({parentA:this,parentB:this.target,color:null}):this.connector&&(Flora.destroyElement(this.connector.id),
this.connector=null)}}),d=new Flora.Sensor({type:"light",behavior:"AGGRESSIVE",sensitivity:3,length:40,opacity:1,offsetAngle:-7.5,border:"1px solid rgb(255, 200, 0)",afterStep:function(){this.activated?this.connector?(this.connector.parentA=this,this.connector.parentB=this.target):this.connector=new Flora.Connector({parentA:this,parentB:this.target,color:null}):this.connector&&(Flora.destroyElement(this.connector.id),this.connector=null)}}),e=new Flora.Sensor({type:"oxygen",behavior:"LIKES",sensitivity:3,
length:40,opacity:1,offsetAngle:22.5,border:"1px solid rgb(0, 174, 239)",afterStep:function(){this.activated?this.connector?(this.connector.parentA=this,this.connector.parentB=this.target):this.connector=new Flora.Connector({parentA:this,parentB:this.target,color:null}):this.connector&&(Flora.destroyElement(this.connector.id),this.connector=null)}}),f=new Flora.Sensor({type:"food",behavior:"LIKES",sensitivity:3,length:40,opacity:1,offsetAngle:-22.5,border:"1px solid rgb(155, 231, 93)",afterStep:function(){this.activated?
this.connector?(this.connector.parentA=this,this.connector.parentB=this.target):this.connector=new Flora.Connector({parentA:this,parentB:this.target,color:null}):this.connector&&(Flora.destroyElement(this.connector.id),this.connector=null)}});new Flora.Mover({controlCamera:!0,mass:5,minSpeed:0.5,defaultSpeed:2,maxSpeed:8,maxSteeringForce:1,wrapEdges:!0,sensors:[b,d,e,f],velocity:Flora.PVector.create(1,0),color:{r:255,g:255,b:255},borderRadius:"100%",boxShadow:"0 0 10px 10px rgba(255, 255, 255, 0.15)",
eyeRotation:0,view:function(){var a=document.createElement("div"),b=document.createElement("div");b.id="eye";b.className="eye";a.appendChild(b);return a},beforeStep:function(){var a,b,c;a=0;for(b=this.sensors.length;a<b;a+=1)this.sensors[a].activated&&(c=!0,this.boxShadow="0 0 10px 10px rgba(255, 255, 255, 0.25)");c||(a=Flora.Utils.clone(this.velocity),a.normalize(),this.velocity.mag()>this.defaultSpeed?a.mult(-this.minSpeed):a.mult(this.defaultSpeed),this.applyForce(a),this.boxShadow="0 0 10px 10px rgba(255, 255, 255, 0.15)");
if(1===Flora.Utils.getRandomNumber(0,500)){this.randomRadius=100;this.target={location:Flora.PVector.PVectorAdd(this.location,Flora.PVector.create(Flora.Utils.getRandomNumber(-this.randomRadius,this.randomRadius),Flora.Utils.getRandomNumber(-this.randomRadius,this.randomRadius)))};var d=this;setTimeout(function(){d.target=null},10)}c=function(){var a=Flora.Utils.getRandomNumber(1,5);return{location:Flora.PVector.create(e,f),acceleration:Flora.PVector.create(Flora.Utils.getRandomNumber(-2,2),Flora.Utils.getRandomNumber(-2,
2)),lifespan:20,checkEdges:false,width:a,height:a,color:{r:255,g:255,b:150}}};a=0;for(b=Flora.lights.length;a<b;a+=1)if(this.isInside(Flora.lights[a])){var e=Flora.lights[a].location.x,f=Flora.lights[a].location.y;Flora.destroyElement(Flora.lights[a].id);Flora.lights.splice(a,1);new Flora.ParticleSystem({burst:1,lifespan:10,particle:c});Flora.Utils.getRandomNumber(0,Flora.World.width);Flora.Utils.getRandomNumber(0,Flora.World.height);Flora.Utils.getRandomNumber(15,25)}a=0;for(b=Flora.oxygen.length;a<
b;a+=1)this.isInside(Flora.oxygen[a])&&(Flora.oxygen[a].scale-=0.025,0.25>Flora.oxygen[a].scale&&(Flora.destroyElement(Flora.oxygen[a].id),Flora.oxygen.splice(a,1)));a=0;for(b=Flora.food.length;a<b;a+=1)this.isInside(Flora.food[a])&&(Flora.food[a].scale-=0.025,0.25>Flora.food[a].scale&&(Flora.destroyElement(Flora.food[a].id),Flora.food.splice(a,1)));document.getElementById("eye").style.webkitTransform="rotate("+this.eyeRotation+"deg)";this.eyeRotation+=Flora.Utils.map(this.velocity.mag(),this.minSpeed,
this.maxSpeed,0.01,50)}});for(var c,b=0,d=0.015*Flora.world.width;b<d;b+=1)e=Flora.Utils.getRandomNumber(0,Flora.world.width),f=Flora.Utils.getRandomNumber(0,Flora.world.height),c=Flora.Utils.getRandomNumber(15,25),new Flora.Heat({width:c,height:c,scale:1,isStatic:!0,location:Flora.PVector.create(e,f)});b=0;for(d=0.015*Flora.world.width;b<d;b+=1)e=Flora.Utils.getRandomNumber(0,Flora.world.width),f=Flora.Utils.getRandomNumber(0,Flora.world.height),c=Flora.Utils.getRandomNumber(15,25),new Flora.Light({width:c,
height:c,scale:1,isStatic:!0,location:Flora.PVector.create(e,f)});b=0;for(d=0.0050*Flora.world.width;b<d;b+=1)e=Flora.Utils.getRandomNumber(0,Flora.world.width),f=Flora.Utils.getRandomNumber(0,Flora.world.height),c=Flora.Utils.getRandomNumber(20,40),new Flora.Oxygen({width:c,height:c,scale:1,isStatic:!0,location:Flora.PVector.create(e,f)});b=0;for(d=0.0050*Flora.world.width;b<d;b+=1)e=Flora.Utils.getRandomNumber(0,Flora.world.width),f=Flora.Utils.getRandomNumber(0,Flora.world.height),c=Flora.Utils.getRandomNumber(20,
40),new Flora.Food({width:c,height:c,scale:1,isStatic:!0,location:Flora.PVector.create(e,f)})});
